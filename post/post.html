<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <title>FPT Secret</title>
    <link href="https://fonts.googleapis.com/css?family=Inter" rel="stylesheet">
    <link rel="stylesheet" href="./assets/fonts/themify-icons.css">
    <link rel="stylesheet" href="./assets/CSS/style4.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<body>
    <!-- header starts -->
    <div class="header">
        <div class="header__left rounded-3"><a class="homee" href="../home?userID=bcb0e181-b4a8-41be-a687-d75ce59bbc63">
            <img src="./assets/img/LogoJS.png" style=" overflow: hidden;
        border-radius: 50%;" alt="">
            <p class="Logofpt">FPT Secret</p>
        </a>
       </div>

    <div class="header__middle">
        <div title="Topic" class="sidebarRow header__option active">
            <ion-icon name="list"></ion-icon>
        </div>
        <div title="Form Page" class="header__option active">
            <a class="formee" href="../form?userID=bcb0e181-b4a8-41be-a687-d75ce59bbc63"><ion-icon name="receipt"></ion-icon></a> 
        </div>
        <div title="Home" class="header__option active">
            <a class="homee" href="../home?userID=bcb0e181-b4a8-41be-a687-d75ce59bbc63"><ion-icon name="home"></ion-icon></a>
        </div>
        <div title="Profile" class="header__option active">
            <a class="profilee" href="../profile?userID=bcb0e181-b4a8-41be-a687-d75ce59bbc63"><ion-icon name="person"></ion-icon></a>
        </div>
        
    </div>

    <div class="header__right rounded-3">
        <div class="header__info">
            <a class="profilee" href="../profile?userID=bcb0e181-b4a8-41be-a687-d75ce59bbc63">
                <img class="avatar1" src="../uploads\dcde87eabb6e64e7cc55c963d8d08f5f" alt="">
                <h5 class="_name">Nguyễn Tuấn Vũ</h5>
            </a>
        </div>
        <!-- <span class="material-icons"> add </span>
        <span class="material-icons"> forum </span>
        <span class="material-icons"> notifications_active </span>
        <span class="material-icons"> expand_more </span> -->
    </div>
    </div>
    <!-- header ends -->

    <!-- main body starts -->
    <div class="main__body">
        <nav class="hide">
            <div class="sidebar">
                
                <div class="uldinh">
                    <ul>
                        <li><a class="Main" href="../post/main?userID=bcb0e181-b4a8-41be-a687-d75ce59bbc63">
                                <ion-icon name="accessibility-outline"></ion-icon>
                                Main
                            </a></li>
                        <li><a class="Exchangeclass" href="../post/topic?topic=Exchange class&amp;userID=bcb0e181-b4a8-41be-a687-d75ce59bbc63">
                                <ion-icon name="book"></ion-icon>
                                Exchange class
                            </a></li>
                        <li><a class="Tradeitems" href="../post/topic?topic=Trade items&amp;userID=bcb0e181-b4a8-41be-a687-d75ce59bbc63">
                                <ion-icon name="cash"></ion-icon>
                                Trade items
                            </a></li>
                        <li><a class="StoryBlog" href="../post/topic?topic=Story / Blog&amp;userID=bcb0e181-b4a8-41be-a687-d75ce59bbc63">
                                <ion-icon name="newspaper"></ion-icon>
                                Story / Blog
                            </a></li>
                        <li><a class="Findlover" href="../post/topic?topic=Find lover&amp;userID=bcb0e181-b4a8-41be-a687-d75ce59bbc63">
                                <ion-icon name="heart-circle"></ion-icon>
                                Find lover
                            </a></li>
                    </ul>
                </div>
                <!-- <ul>
                    <li><a class="Main" href="#">
                            <ion-icon name="accessibility-outline"></ion-icon>
                            Main
                        </a></li>
                    <li><a class="Exchangeclass" href="#">
                            <ion-icon name="book"></ion-icon>
                            Exchange class
                        </a></li>
                    <li><a class="Tradeitems" href="#">
                            <ion-icon name="cash"></ion-icon>
                            Trade items
                        </a></li>
                    <li><a class="StoryBlog" href="#">
                            <ion-icon name="newspaper"></ion-icon>
                            Story / Blog
                        </a></li>
                    <li><a class="Findlover" href="#">
                            <ion-icon name="heart-circle"></ion-icon>
                            Find lover
                        </a></li>
                </ul> -->
            </div>
             <!-- sidebar ends -->

        </nav>
        <!-- feed starts -->
        <div class="feed">
                      <div class="post">
                          <div class="post__top"><a href="/user/profile?_userID=c5cbcf06-2417-4f71-810b-610a995f858b&amp;userID=bcb0e181-b4a8-41be-a687-d75ce59bbc63">
                                  <img class="avatar1 post__avatar" src=".././personal/assets/img/avatar-trang.jpg" alt="">
                                  <div class="post__topInfo">
                                      <h3>Le Duc Anh</h3>
                                      <p>2024-03-22 00:55</p>
                                  </div>
                              </a>
                              <div class="nameTopicbook rounded-3">
                                  <ion-icon name="book"></ion-icon>
                                  Exchange class
                              </div>
                          </div>
                          <div class="post__bottom">
                              <div class="title">
                                  <h4>Tìm tình yêu</h4>
                              </div>
                              <p>fvcdssdfdsfsdf</p>
                          </div>
                          <div class="post__image">
                              <img class="rounded-2" src="../uploads\939d6434cbaf993d70ef554c3d9bba58" alt="">
                          </div>
                          <div class="post__options">
                              <div class="heart">
                                <button class="heartBtn" data-post-id="4b47e08b-e48f-4c10-9053-894ab2abcb63"> <!-- Thêm thuộc tính data-post-id vào đây -->
                                <svg class="heartIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                    <path fill="currentColor" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path>
                                </svg>
                            </button>
                            <p class="numberHeart" id="likeCount_4b47e08b-e48f-4c10-9053-894ab2abcb63">1</p> 
                            </div>
                              </div>
                          </div>
                      
                  </div>
     <!-- main body ends -->
   
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule="" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

    <div id="js-root"></div>
    <script async="" defer="" crossorigin="anonymous" src="https://connect.facebook.net/en_GB/sdk.js#xfbml=1&amp;version=v10.0" nonce="zUxEq08J"></script>
    <script>
        const nav = document.querySelector('nav');
        const sidebarRow = document.querySelector('.sidebarRow');

        sidebarRow.onclick = function () {
            nav.classList.toggle('hide');

        }
    </script>




<script>
    const heartBtns = document.querySelectorAll(".heartBtn");

    heartBtns.forEach((btn) => {
        btn.addEventListener("click", async function () {
            //this.querySelector(".heartIcon").classList.toggle("red");
            const postId = this.getAttribute("data-post-id");
            const isLiked = this.querySelector(".heartIcon").classList.contains("red");
            const userID = localStorage.getItem("userID");
            //console.log(isLiked);
            if (!postId) {
                console.error("Post ID is not set.");
                return;
            }
    
            // Vô hiệu hóa nút để ngăn like dồn dập
            this.disabled = true;
    
            try {
                // Gửi yêu cầu POST hoặc DELETE tùy thuộc vào trạng thái like
                const response = await fetch(`/like/${postId}?userID=${userID}`, {
                    method: isLiked ? "DELETE" : "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify({ postId, userID }),
                });
    
                if (!response.ok) {
                    console.error("Error:", await response.text());
                    return;
                }
    
                // Nhận và xử lý phản hồi từ máy chủ
                const data = await response.json();
                //console.log(data);
                //console.log(data.like_count);
                if (data.success && data.like_count !== undefined) {
                    const likeCounter = document.getElementById(`likeCount_${postId}`);
                    if (likeCounter) {
                        likeCounter.textContent = data.like_count;
                    }
    
                    // Thêm/xóa lớp 'red' để thay đổi màu của biểu tượng trái tim
                    
    
                    // Kích hoạt lại nút like
                    this.disabled = false;
                }
            } catch (error) {
                console.error("Error:", error);
                // Xử lý lỗi nếu có
            }
        });
    });
    
    //nút bấm comment hiện ra comment
    document.addEventListener("DOMContentLoaded", function() {
  var commentBtns = document.querySelectorAll(".commentBtn");
  var commentContainers = document.querySelectorAll(".commentContainer");

  commentBtns.forEach(function(commentBtn, index) {
    commentBtn.addEventListener("click", function() {
      commentContainers.forEach(function(container, containerIndex) {
        if (containerIndex === index) {
          container.style.display = (container.style.display === "block") ? "none" : "block";
        } else {
          container.style.display = "none";
        }
      });
    });
  });
});

    //nút xóa comment
    var editDeleteBtns = document.querySelectorAll(".edit-deleteComment-btn");
editDeleteBtns.forEach(function(btn) {
  btn.addEventListener("click", function(event) {
    var dropdownContent = this.querySelector(".dropdown-content");
    dropdownContent.style.display = dropdownContent.style.display === "block" ? "none" : "block";
  });
});
//xuống donggf
function auto_grow(element) {
            element.style.height = "5px";
            element.style.height = (element.scrollHeight) + "px";
        }
</script></div></body></html>