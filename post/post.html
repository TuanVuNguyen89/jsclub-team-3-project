<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <title>FPT Secret</title>
    <link rel="stylesheet" href="./assets/fonts/themify-icons.css">
    <link rel="stylesheet" href="./assets/CSS/style4.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<body>
    <!-- header starts -->
    <div class="header">
        <div class="header__left rounded-3"><a class="homee" href="../home?userID=c541a839-d1b4-40fd-b4ce-dfbaad79f189">
                <img src="./assets/img/LogoJS.png" style=" overflow: hidden;
            border-radius: 50%;" alt="">
                <p class="Logofpt">FPT Secret</p>
            </a>
        </div>

        <div class="header__middle">
            <div class="header__option1 active">
                <div title="Topic" class="sidebarRow">
                    <ion-icon name="list"></ion-icon>
                </div>
            </div>
            <div title="Form Page" class="header__option active">
                <a class="formee" href="../form?userID=c541a839-d1b4-40fd-b4ce-dfbaad79f189"><ion-icon name="receipt"></ion-icon></a> 
            </div>
            <div title="Home" class="header__option active">
                <a class="homee" href="../home?userID=c541a839-d1b4-40fd-b4ce-dfbaad79f189"><ion-icon name="home"></ion-icon></a>
            </div>
            <div title="Profile" class="header__option active">
                <a class="profilee" href="../profile?userID=c541a839-d1b4-40fd-b4ce-dfbaad79f189"><ion-icon name="person"></ion-icon></a>
            </div>
        </div>

        <div class="header__right rounded-3">
            <div class="header__info">
                <a class="profilee" href="../profile?userID=c541a839-d1b4-40fd-b4ce-dfbaad79f189">
                    <img class="avatar1" src="../uploads\3700edca345b3a690cc70d46242d6da1" alt="">
                    <h5 class="_name">Nguyễn Văn A</h5>
                </a>
            </div>
            <!-- <span class="material-icons"> add </span>
            <span class="material-icons"> forum </span>
            <span class="material-icons"> notifications_active </span>
            <span class="material-icons"> expand_more </span> -->
        </div>
    </div>
    <!-- header ends -->

    <!-- main body starts -->
    <div class="main__body">
        <nav class="hide">
            <div class="sidebar">
                
                <div class="uldinh">
                    <ul>
                        <li><a class="Main" href="../post/main?userID=c541a839-d1b4-40fd-b4ce-dfbaad79f189">
                                <ion-icon name="accessibility-outline"></ion-icon>
                                Main
                            </a></li>
                        <li><a class="Exchangeclass" href="../post/topic?topic=Exchange class&amp;userID=c541a839-d1b4-40fd-b4ce-dfbaad79f189">
                                <ion-icon name="book"></ion-icon>
                                Exchange class
                            </a></li>
                        <li><a class="Tradeitems" href="../post/topic?topic=Trade items&amp;userID=c541a839-d1b4-40fd-b4ce-dfbaad79f189">
                                <ion-icon name="cash"></ion-icon>
                                Trade items
                            </a></li>
                        <li><a class="StoryBlog" href="../post/topic?topic=Story / Blog&amp;userID=c541a839-d1b4-40fd-b4ce-dfbaad79f189">
                                <ion-icon name="newspaper"></ion-icon>
                                Story / Blog
                            </a></li>
                        <li><a class="Findlover" href="../post/topic?topic=Find lover&amp;userID=c541a839-d1b4-40fd-b4ce-dfbaad79f189">
                                <ion-icon name="heart-circle"></ion-icon>
                                Find lover
                            </a></li>
                    </ul>
                </div>
                <!-- <ul>
                    <li><a class="Main" href="#">
                            <ion-icon name="accessibility-outline"></ion-icon>
                            Main
                        </a></li>
                    <li><a class="Exchangeclass" href="#">
                            <ion-icon name="book"></ion-icon>
                            Exchange class
                        </a></li>
                    <li><a class="Tradeitems" href="#">
                            <ion-icon name="cash"></ion-icon>
                            Trade items
                        </a></li>
                    <li><a class="StoryBlog" href="#">
                            <ion-icon name="newspaper"></ion-icon>
                            Story / Blog
                        </a></li>
                    <li><a class="Findlover" href="#">
                            <ion-icon name="heart-circle"></ion-icon>
                            Find lover
                        </a></li>
                </ul> -->
            </div>

        </nav>
        <!-- feed starts -->
        <div class="feed">
                      <div class="post">
                          <div class="post__top"><a href="/user/profile?_userID=f0a0efd9-3f65-4d04-8b6e-a29b4143abe9&amp;userID=c541a839-d1b4-40fd-b4ce-dfbaad79f189">
                                  <img class="avatar1 post__avatar" src="../uploads\c29aafcc9441ee6d2d372ec700a284aa" alt="">
                                  <div class="post__topInfo">
                                      <h3>anbasdnasdmnnmd</h3>
                                      <p>2024-03-19 11:22</p>
                                  </div>
                              </a>
                              <div class="nameTopicbook rounded-3">
                                  <ion-icon name="book"></ion-icon>
                                  Exchange class
                              </div>
                          </div>
                          <div class="post__bottom">
                              <div class="title">
                                  <h4>sdaada</h4>
                              </div>
                              <p>adasdsad</p>
                          </div>
                          <div class="post__image">
                              <img class="rounded-2" src="../uploads\53f157340da2ad5c76186e07ac097355" alt="">
                          </div>
                          <div class="post__options">
                              <div class="heart">
                                <button class="heartBtn" data-post-id="8823d329-ba3e-40f3-9cd0-01cf9805bbc7"> <!-- Thêm thuộc tính data-post-id vào đây -->
                                <svg class="heartIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                    <path fill="currentColor" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path>
                                </svg>
                            </button>
                            <p class="numberHeart" id="likeCount_8823d329-ba3e-40f3-9cd0-01cf9805bbc7">1</p> 
                            </div>
                              </div>
                          </div>
                      
                  
                      <div class="post">
                          <div class="post__top"><a href="/user/profile?_userID=38161930-5658-49f7-8028-f39de33ec86d&amp;userID=c541a839-d1b4-40fd-b4ce-dfbaad79f189">
                                  <img class="avatar1 post__avatar" src=".././personal/assets/img/avatar-trang.jpg" alt="">
                                  <div class="post__topInfo">
                                      <h3>aaaaa</h3>
                                      <p>2024-03-19 10:42</p>
                                  </div>
                              </a>
                              <div class="nameTopicbook rounded-3">
                                  <ion-icon name="book"></ion-icon>
                                  Exchange class
                              </div>
                          </div>
                          <div class="post__bottom">
                              <div class="title">
                                  <h4>34we</h4>
                              </div>
                              <p>erewr</p>
                          </div>
                          <div class="post__image">
                              <img class="rounded-2" src="../uploads\172cbbe2840d3e9178a045867cab55a7" alt="">
                          </div>
                          <div class="post__options">
                              <div class="heart">
                                <button class="heartBtn" data-post-id="89c9ba58-ada4-4386-87c3-fc9dfbddf56f"> <!-- Thêm thuộc tính data-post-id vào đây -->
                                <svg class="heartIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                    <path fill="currentColor" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path>
                                </svg>
                            </button>
                            <p class="numberHeart" id="likeCount_89c9ba58-ada4-4386-87c3-fc9dfbddf56f">1</p> 
                            </div>
                              </div>
                          </div>
                      
                  
                      <div class="post">
                          <div class="post__top"><a href="/user/profile?_userID=f0a0efd9-3f65-4d04-8b6e-a29b4143abe9&amp;userID=c541a839-d1b4-40fd-b4ce-dfbaad79f189">
                                  <img class="avatar1 post__avatar" src="../uploads\c29aafcc9441ee6d2d372ec700a284aa" alt="">
                                  <div class="post__topInfo">
                                      <h3>anbasdnasdmnnmd</h3>
                                      <p>2024-03-19 11:20</p>
                                  </div>
                              </a>
                              <div class="nameTopiclove rounded-3">
                                  <ion-icon name="heart-circle"></ion-icon>
                                  Find lover
                              </div>
                          </div>
                          <div class="post__bottom">
                              <div class="title">
                                  <h4>saasdasdasdsd</h4>
                              </div>
                              <p>asasddddddddddddddddddddddddddddddd</p>
                          </div>
                          <div class="post__image">
                              <img class="rounded-2" src="../uploads\0162404ed22f8a84f07832cae635db7a" alt="">
                          </div>
                          <div class="post__options">
                              <div class="heart">
                                <button class="heartBtn" data-post-id="f89b9ee2-7b37-4f25-843a-41c15b1bf53a"> <!-- Thêm thuộc tính data-post-id vào đây -->
                                <svg class="heartIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                    <path fill="currentColor" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path>
                                </svg>
                            </button>
                            <p class="numberHeart" id="likeCount_f89b9ee2-7b37-4f25-843a-41c15b1bf53a">1</p> 
                            </div>
                              </div>
                          </div>
                      
                  
                      <div class="post">
                          <div class="post__top"><a href="/user/profile?_userID=49add393-2c67-4963-90e0-05d1d9647d80&amp;userID=c541a839-d1b4-40fd-b4ce-dfbaad79f189">
                                  <img class="avatar1 post__avatar" src="../uploads\a7e7d93fb624bd73afe561aaca038f6d" alt="">
                                  <div class="post__topInfo">
                                      <h3>Funker Mr.</h3>
                                      <p>2024-03-19 11:05</p>
                                  </div>
                              </a>
                              <div class="nameTopicbook rounded-3">
                                  <ion-icon name="book"></ion-icon>
                                  Exchange class
                              </div>
                          </div>
                          <div class="post__bottom">
                              <div class="title">
                                  <h4>huytran123</h4>
                              </div>
                              <p>aloa alo</p>
                          </div>
                          <div class="post__image">
                              <img class="rounded-2" src="../uploads\e5644185685023f300546b3b16af165c" alt="">
                          </div>
                          <div class="post__options">
                              <div class="heart">
                                <button class="heartBtn" data-post-id="f91794ae-b652-4448-97cc-b5fa18fa016f"> <!-- Thêm thuộc tính data-post-id vào đây -->
                                <svg class="heartIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                    <path fill="currentColor" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path>
                                </svg>
                            </button>
                            <p class="numberHeart" id="likeCount_f91794ae-b652-4448-97cc-b5fa18fa016f">2</p> 
                            </div>
                              </div>
                          </div>
                      
                  
                      <div class="post">
                          <div class="post__top"><a href="/user/profile?_userID=38161930-5658-49f7-8028-f39de33ec86d&amp;userID=c541a839-d1b4-40fd-b4ce-dfbaad79f189">
                                  <img class="avatar1 post__avatar" src=".././personal/assets/img/avatar-trang.jpg" alt="">
                                  <div class="post__topInfo">
                                      <h3>aaaaa</h3>
                                      <p>2024-03-19 10:52</p>
                                  </div>
                              </a>
                              <div class="nameTopic rounded-3">
                                  <ion-icon name="cash"></ion-icon>
                                  Trade items
                              </div>
                          </div>
                          <div class="post__bottom">
                              <div class="title">
                                  <h4>ewqe</h4>
                              </div>
                              <p>weqw</p>
                          </div>
                          <div class="post__image">
                              <img class="rounded-2" src="../uploads\6af4ac069e7dc26128c31d483d9a134a" alt="">
                          </div>
                          <div class="post__options">
                              <div class="heart">
                                <button class="heartBtn" data-post-id="b9da3269-6881-4336-afa5-503aeaacc6a1"> <!-- Thêm thuộc tính data-post-id vào đây -->
                                <svg class="heartIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                    <path fill="currentColor" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path>
                                </svg>
                            </button>
                            <p class="numberHeart" id="likeCount_b9da3269-6881-4336-afa5-503aeaacc6a1">0</p> 
                            </div>
                              </div>
                          </div>
                      
                  </div>
        <!-- feed ends -->
    </div>
    <!-- sidebar ends -->
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule="" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

    <div style="flex: 0.5" class="widgets">
        <div class="js-page">
            
        </div>
    </div>
    
    <!-- main body ends -->

    <div id="js-root"></div>
    <script async="" defer="" crossorigin="anonymous" src="https://connect.facebook.net/en_GB/sdk.js#xfbml=1&amp;version=v10.0" nonce="zUxEq08J"></script>
    <script>
        const nav = document.querySelector('nav');
        const sidebarRow = document.querySelector('.sidebarRow');

        sidebarRow.onclick = function () {
            nav.classList.toggle('hide');

        }
    </script>



<script>
    const heartBtns = document.querySelectorAll(".heartBtn");

    heartBtns.forEach((btn) => {
        btn.addEventListener("click", async function () {
            //this.querySelector(".heartIcon").classList.toggle("red");
            const postId = this.getAttribute("data-post-id");
            const isLiked = this.querySelector(".heartIcon").classList.contains("red");
            const userID = localStorage.getItem("userID");
            //console.log(isLiked);
            if (!postId) {
                console.error("Post ID is not set.");
                return;
            }
    
            // Vô hiệu hóa nút để ngăn like dồn dập
            this.disabled = true;
    
            try {
                // Gửi yêu cầu POST hoặc DELETE tùy thuộc vào trạng thái like
                const response = await fetch(`/like/${postId}?userID=${userID}`, {
                    method: isLiked ? "DELETE" : "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify({ postId, userID }),
                });
    
                if (!response.ok) {
                    console.error("Error:", await response.text());
                    return;
                }
    
                // Nhận và xử lý phản hồi từ máy chủ
                const data = await response.json();
                //console.log(data);
                //console.log(data.like_count);
                if (data.success && data.like_count !== undefined) {
                    const likeCounter = document.getElementById(`likeCount_${postId}`);
                    if (likeCounter) {
                        likeCounter.textContent = data.like_count;
                    }
    
                    // Thêm/xóa lớp 'red' để thay đổi màu của biểu tượng trái tim
                    
    
                    // Kích hoạt lại nút like
                    this.disabled = false;
                }
            } catch (error) {
                console.error("Error:", error);
                // Xử lý lỗi nếu có
            }
        });
    });
    
    
</script></body></html>