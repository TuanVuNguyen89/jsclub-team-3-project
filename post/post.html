<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <title>FPT Secret</title>
    <link rel="stylesheet" href="./assets/fonts/themify-icons.css">
    <link rel="stylesheet" href="./assets/CSS/style4.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<body>
    <!-- header starts -->
    <div class="header">
        <div class="header__left rounded-3"><a href="../">
                <img src="./assets/img/LogoJS.png" style=" overflow: hidden;
            border-radius: 50%;" alt="">
                <p class="Logofpt">FPT Secret</p>
            </a>
        </div>

        <div class="header__middle">
            <div class="header__option1 active">
                <div title="Topic" class="sidebarRow">
                    <ion-icon name="list"></ion-icon>
                </div>
            </div>
            <div title="Form Page" class="header__option active">
                <a href="/form"><ion-icon name="receipt"></ion-icon></a> 
            </div>
            <div title="Home" class="header__option active">
                <a href="../"><ion-icon name="home"></ion-icon></a>
            </div>
            <div title="Profile" class="header__option active">
                <a href="/profile"><ion-icon name="person"></ion-icon></a>
            </div>
        </div>

        <div class="header__right rounded-3">
            <div class="header__info">
                <a href="/profile">
                    <img class="avatar1" src="../uploads\5da64284aa14a05a61811cfc648feff7" alt="">
                    <h5 class="_name">Nguy·ªÖn Tu·∫•n V≈©</h5>
                </a>
            </div>
            <!-- <span class="material-icons"> add </span>
            <span class="material-icons"> forum </span>
            <span class="material-icons"> notifications_active </span>
            <span class="material-icons"> expand_more </span> -->
        </div>
    </div>
    <!-- header ends -->

    <!-- main body starts -->
    <div class="main__body">
        <nav class="hide">
            <div class="sidebar">
                
                <div class="uldinh">
                    <ul>
                        <li><a class="Main" href="../post/main">
                                <ion-icon name="accessibility-outline"></ion-icon>
                                Main
                            </a></li>
                        <li><a class="Exchangeclass" href="../post/topic?topic=Exchange class">
                                <ion-icon name="book"></ion-icon>
                                Exchange class
                            </a></li>
                        <li><a class="Tradeitems" href="../post/topic?topic=Trade items">
                                <ion-icon name="cash"></ion-icon>
                                Trade items
                            </a></li>
                        <li><a class="StoryBlog" href="../post/topic?topic=Story / Blog">
                                <ion-icon name="newspaper"></ion-icon>
                                Story / Blog
                            </a></li>
                        <li><a class="Findlover" href="../post/topic?topic=Find lover">
                                <ion-icon name="heart-circle"></ion-icon>
                                Find lover
                            </a></li>
                    </ul>
                </div>
                <!-- <ul>
                    <li><a class="Main" href="#">
                            <ion-icon name="accessibility-outline"></ion-icon>
                            Main
                        </a></li>
                    <li><a class="Exchangeclass" href="#">
                            <ion-icon name="book"></ion-icon>
                            Exchange class
                        </a></li>
                    <li><a class="Tradeitems" href="#">
                            <ion-icon name="cash"></ion-icon>
                            Trade items
                        </a></li>
                    <li><a class="StoryBlog" href="#">
                            <ion-icon name="newspaper"></ion-icon>
                            Story / Blog
                        </a></li>
                    <li><a class="Findlover" href="#">
                            <ion-icon name="heart-circle"></ion-icon>
                            Find lover
                        </a></li>
                </ul> -->
            </div>

        </nav>
        <!-- feed starts -->
        <div class="feed">
                      <div class="post">
                          <div class="post__top"><a href="/user/profile?id=ec21289e-2db3-4a9c-ba31-bfd15d28e862">
                                  <img class="avatar1 post__avatar" src="../uploads\5da64284aa14a05a61811cfc648feff7" alt="">
                                  <div class="post__topInfo">
                                      <h3>Nguy·ªÖn Tu·∫•n V≈©</h3>
                                      <p>2024-03-15 05:59:02</p>
                                  </div>
                              </a>
                              <div class="nameTopiclove rounded-3">
                                  <ion-icon name="heart-circle"></ion-icon>
                                  Find lover
                              </div>
                          </div>
                          <div class="post__bottom">
                              <div class="title">
                                  <h4>Anh V≈© ƒë·∫πp trai nhi·ªÅu ti·ªÅn, tuy·ªÉn ng∆∞·ªùi y√™u</h4>
                              </div>
                              <p>Ti√™u ch√≠:<br>- Ch√¢n d√†i : ü¶µ<br>- M·∫∑t xinh: üëº<br>- Ngon: üëß<br><br>H√¨nh m·∫´u trong ·∫£nh b√™n d∆∞·ªõi</p>
                          </div>
                          <div class="post__image">
                              <img class="rounded-2" src="../uploads\fa93d412c3fa470814505ef1dd1691f0" alt="">
                          </div>
                          <div class="post__options">
                                <div class="heart">
                                  <button class="heartBtn" data-post-id="938d8f4e-f692-4675-883e-96cfc7ce6d16"> <!-- Th√™m thu·ªôc t√≠nh data-post-id v√†o ƒë√¢y -->
                                  <svg class="heartIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                      <path fill="currentColor" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path>
                                  </svg>
                              </button>
                              <p class="numberHeart" id="likeCount_938d8f4e-f692-4675-883e-96cfc7ce6d16">2</p> 
                              </div>
                                </div>
                      </div>
                  </div>
        <!-- feed ends -->
    </div>
    <!-- sidebar ends -->
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule="" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

    <div style="flex: 0.5" class="widgets">
        <div class="js-page">
            
        </div>
    </div>
    
    <!-- main body ends -->

    <div id="js-root"></div>
    <script async="" defer="" crossorigin="anonymous" src="https://connect.facebook.net/en_GB/sdk.js#xfbml=1&amp;version=v10.0" nonce="zUxEq08J"></script>
    <script>
        const nav = document.querySelector('nav');
        const sidebarRow = document.querySelector('.sidebarRow');

        sidebarRow.onclick = function () {
            nav.classList.toggle('hide');

        }
    </script>



<script>
    const heartBtns = document.querySelectorAll(".heartBtn");

    heartBtns.forEach((btn) => {
        btn.addEventListener("click", async function () {
            //this.querySelector(".heartIcon").classList.toggle("red");
            const postId = this.getAttribute("data-post-id");
            const isLiked = this.querySelector(".heartIcon").classList.contains("red");
            
            //console.log(isLiked);
            if (!postId) {
                console.error("Post ID is not set.");
                return;
            }
    
            // V√¥ hi·ªáu h√≥a n√∫t ƒë·ªÉ ngƒÉn like d·ªìn d·∫≠p
            this.disabled = true;
    
            try {
                // G·ª≠i y√™u c·∫ßu POST ho·∫∑c DELETE t√πy thu·ªôc v√†o tr·∫°ng th√°i like
                const response = await fetch(`/like/${postId}`, {
                    method: isLiked ? "DELETE" : "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify({ postId }),
                });
    
                if (!response.ok) {
                    console.error("Error:", await response.text());
                    return;
                }
    
                // Nh·∫≠n v√† x·ª≠ l√Ω ph·∫£n h·ªìi t·ª´ m√°y ch·ªß
                const data = await response.json();
                //console.log(data);
                //console.log(data.like_count);
                if (data.success && data.like_count !== undefined) {
                    const likeCounter = document.getElementById(`likeCount_${postId}`);
                    if (likeCounter) {
                        likeCounter.textContent = data.like_count;
                    }
    
                    // Th√™m/x√≥a l·ªõp 'red' ƒë·ªÉ thay ƒë·ªïi m√†u c·ªßa bi·ªÉu t∆∞·ª£ng tr√°i tim
                    
    
                    // K√≠ch ho·∫°t l·∫°i n√∫t like
                    this.disabled = false;
                }
            } catch (error) {
                console.error("Error:", error);
                // X·ª≠ l√Ω l·ªói n·∫øu c√≥
            }
        });
    });
    
    
</script></body></html>