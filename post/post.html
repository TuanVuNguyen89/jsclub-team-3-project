<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <title>FPT Secret</title>
    <link rel="stylesheet" href="./assets/fonts/themify-icons.css">
    <link rel="stylesheet" href="./assets/CSS/style4.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<body>
    <!-- header starts -->
    <div class="header">
        <div class="header__left rounded-3"><a href="../home">
                <img src="./assets/img/LogoJS.png" style=" overflow: hidden;
            border-radius: 50%;" alt="">
                <p class="Logofpt">FPT Secret</p>
            </a>
        </div>

        <div class="header__middle">
            <div class="header__option1 active">
                <div title="Topic" class="sidebarRow">
                    <ion-icon name="list"></ion-icon>
                </div>
            </div>
            <div title="Form Page" class="header__option active">
                <a href="/form"><ion-icon name="receipt"></ion-icon></a> 
            </div>
            <div title="Home" class="header__option active">
                <a href="../home"><ion-icon name="home"></ion-icon></a>
            </div>
            <div title="Profile" class="header__option active">
                <a href="/profile"><ion-icon name="person"></ion-icon></a>
            </div>
        </div>

        <div class="header__right rounded-3">
            <div class="header__info">
                <a href="/profile">
                    <img class="avatar1" src="../uploads\d6ea513e9c92d28d86ee658f5d51ed87" alt="">
                    <h5 class="_name">Nguyễn Văn A</h5>
                </a>
            </div>
            <!-- <span class="material-icons"> add </span>
            <span class="material-icons"> forum </span>
            <span class="material-icons"> notifications_active </span>
            <span class="material-icons"> expand_more </span> -->
        </div>
    </div>
    <!-- header ends -->

    <!-- main body starts -->
    <div class="main__body">
        <nav class="hide">
            <div class="sidebar">
                
                <div class="uldinh">
                    <ul>
                        <li><a class="Main" href="../post/main">
                                <ion-icon name="accessibility-outline"></ion-icon>
                                Main
                            </a></li>
                        <li><a class="Exchangeclass" href="../post/topic?topic=Exchange class">
                                <ion-icon name="book"></ion-icon>
                                Exchange class
                            </a></li>
                        <li><a class="Tradeitems" href="../post/topic?topic=Trade items">
                                <ion-icon name="cash"></ion-icon>
                                Trade items
                            </a></li>
                        <li><a class="StoryBlog" href="../post/topic?topic=Story / Blog">
                                <ion-icon name="newspaper"></ion-icon>
                                Story / Blog
                            </a></li>
                        <li><a class="Findlover" href="../post/topic?topic=Find lover">
                                <ion-icon name="heart-circle"></ion-icon>
                                Find lover
                            </a></li>
                    </ul>
                </div>
                <!-- <ul>
                    <li><a class="Main" href="#">
                            <ion-icon name="accessibility-outline"></ion-icon>
                            Main
                        </a></li>
                    <li><a class="Exchangeclass" href="#">
                            <ion-icon name="book"></ion-icon>
                            Exchange class
                        </a></li>
                    <li><a class="Tradeitems" href="#">
                            <ion-icon name="cash"></ion-icon>
                            Trade items
                        </a></li>
                    <li><a class="StoryBlog" href="#">
                            <ion-icon name="newspaper"></ion-icon>
                            Story / Blog
                        </a></li>
                    <li><a class="Findlover" href="#">
                            <ion-icon name="heart-circle"></ion-icon>
                            Find lover
                        </a></li>
                </ul> -->
            </div>

        </nav>
        <!-- feed starts -->
        <div class="feed">
                      <div class="post">
                          <div class="post__top"><a href="/user/profile?id=bf3deb2c-15e4-4c0f-89c6-d8409bb8bb0d">
                                  <img class="avatar1 post__avatar" src="../uploads\d6ea513e9c92d28d86ee658f5d51ed87" alt="">
                                  <div class="post__topInfo">
                                      <h3>Nguyễn Văn A</h3>
                                      <p>2024-03-17 23:12</p>
                                  </div>
                              </a>
                              <div class="nameTopicbook rounded-3">
                                  <ion-icon name="book"></ion-icon>
                                  Exchange class
                              </div>
                          </div>
                          <div class="post__bottom">
                              <div class="title">
                                  <h4>dà</h4>
                              </div>
                              <p>adsfasd</p>
                          </div>
                          <div class="post__image">
                              <img class="rounded-2" src="../uploads\50f8b5eb4f28325114e26c8c2ece0a6f" alt="">
                          </div>
                          <div class="post__options">
                              <div class="heart">
                                <button class="heartBtn" data-post-id="59330dd1-28e5-410b-a16c-9af15e1424d1"> <!-- Thêm thuộc tính data-post-id vào đây -->
                                <svg class="heartIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                    <path fill="currentColor" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path>
                                </svg>
                            </button>
                            <p class="numberHeart" id="likeCount_59330dd1-28e5-410b-a16c-9af15e1424d1">2</p> 
                            </div>
                              </div>
                          </div>
                      
                  
                      <div class="post">
                          <div class="post__top"><a href="/user/profile?id=7fdd3757-2985-4577-a4c5-f86ddd638ee2">
                                  <img class="avatar1 post__avatar" src="../uploads\e87d257082b4b467c6a0b05b7edb0855" alt="">
                                  <div class="post__topInfo">
                                      <h3>Nguyễn Tuấn Trường</h3>
                                      <p>2024-03-17 19:16</p>
                                  </div>
                              </a>
                              <div class="nameTopic rounded-3">
                                  <ion-icon name="cash"></ion-icon>
                                  Trade items
                              </div>
                          </div>
                          <div class="post__bottom">
                              <div class="title">
                                  <h4>test chức năng tiếp</h4>
                              </div>
                              <p>đăng bài lúc 19:16 ngày 17/03/2024</p>
                          </div>
                          <div class="post__image">
                              <img class="rounded-2" src="../uploads\2651158b3aac65dce977c2d6136b6a6e" alt="">
                          </div>
                          <div class="post__options">
                              <div class="heart">
                                <button class="heartBtn" data-post-id="d489820e-5f01-4e3e-b8dc-fccfe99a1533"> <!-- Thêm thuộc tính data-post-id vào đây -->
                                <svg class="heartIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                    <path fill="currentColor" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path>
                                </svg>
                            </button>
                            <p class="numberHeart" id="likeCount_d489820e-5f01-4e3e-b8dc-fccfe99a1533">1</p> 
                            </div>
                              </div>
                          </div>
                      
                  
                      <div class="post">
                          <div class="post__top"><a href="/user/profile?id=7fdd3757-2985-4577-a4c5-f86ddd638ee2">
                                  <img class="avatar1 post__avatar" src="../uploads\e87d257082b4b467c6a0b05b7edb0855" alt="">
                                  <div class="post__topInfo">
                                      <h3>Nguyễn Tuấn Trường</h3>
                                      <p>2024-03-17 19:09</p>
                                  </div>
                              </a>
                              <div class="nameTopicbook rounded-3">
                                  <ion-icon name="book"></ion-icon>
                                  Exchange class
                              </div>
                          </div>
                          <div class="post__bottom">
                              <div class="title">
                                  <h4>test chức năng</h4>
                              </div>
                              <p>Đăng lúc 7:09 ngày 17/03/2024</p>
                          </div>
                          <div class="post__image">
                              <img class="rounded-2" src="../uploads\a2b39b53adc4557ba73f626bdbaa1cfe" alt="">
                          </div>
                          <div class="post__options">
                              <div class="heart">
                                <button class="heartBtn" data-post-id="c8f34710-3303-4cbc-8678-bd668f066b16"> <!-- Thêm thuộc tính data-post-id vào đây -->
                                <svg class="heartIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                    <path fill="currentColor" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path>
                                </svg>
                            </button>
                            <p class="numberHeart" id="likeCount_c8f34710-3303-4cbc-8678-bd668f066b16">1</p> 
                            </div>
                              </div>
                          </div>
                      
                  
                      <div class="post">
                          <div class="post__top"><a href="/user/profile?id=7fdd3757-2985-4577-a4c5-f86ddd638ee2">
                                  <img class="avatar1 post__avatar" src="../uploads\e87d257082b4b467c6a0b05b7edb0855" alt="">
                                  <div class="post__topInfo">
                                      <h3>Nguyễn Tuấn Trường</h3>
                                      <p>2024-03-16 12:18</p>
                                  </div>
                              </a>
                              <div class="nameTopic rounded-3">
                                  <ion-icon name="cash"></ion-icon>
                                  Trade items
                              </div>
                          </div>
                          <div class="post__bottom">
                              <div class="title">
                                  <h4>Hôm nay tôi buồn một mình trên phố đông</h4>
                              </div>
                              <p>1<br>2<br>3<br>4<br>loa loa loa<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>heheehhe</p>
                          </div>
                          <div class="post__image">
                              <img class="rounded-2" src="../uploads\de6da86cfd808b519ce129e77946a5f2" alt="">
                          </div>
                          <div class="post__options">
                              <div class="heart">
                                <button class="heartBtn" data-post-id="1e73a09a-99ea-447a-bdb0-a65c3213f1e5"> <!-- Thêm thuộc tính data-post-id vào đây -->
                                <svg class="heartIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                    <path fill="currentColor" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path>
                                </svg>
                            </button>
                            <p class="numberHeart" id="likeCount_1e73a09a-99ea-447a-bdb0-a65c3213f1e5">1</p> 
                            </div>
                              </div>
                          </div>
                      
                  
                      <div class="post">
                          <div class="post__top"><a href="/user/profile?id=7fdd3757-2985-4577-a4c5-f86ddd638ee2">
                                  <img class="avatar1 post__avatar" src="../uploads\e87d257082b4b467c6a0b05b7edb0855" alt="">
                                  <div class="post__topInfo">
                                      <h3>Nguyễn Tuấn Trường</h3>
                                      <p>2024-03-16 12:11</p>
                                  </div>
                              </a>
                              <div class="nameTopicBlog rounded-3">
                                  <ion-icon name="newspaper"></ion-icon>
                                  Story / Blog
                              </div>
                          </div>
                          <div class="post__bottom">
                              <div class="title">
                                  <h4>Trường thích ăn cơm</h4>
                              </div>
                              <p>Cơm rất ngon<br>dinh dưỡng<br>tốt cho sức khỏe<br>thật tuyệt<br>cảm ơn</p>
                          </div>
                          <div class="post__image">
                              <img class="rounded-2" src="../uploads\b9d6ccc443d5b9532b52a245d23c4960" alt="">
                          </div>
                          <div class="post__options">
                              <div class="heart">
                                <button class="heartBtn" data-post-id="32d127f9-8b20-4de5-8a19-66f566b32b3b"> <!-- Thêm thuộc tính data-post-id vào đây -->
                                <svg class="heartIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                    <path fill="currentColor" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path>
                                </svg>
                            </button>
                            <p class="numberHeart" id="likeCount_32d127f9-8b20-4de5-8a19-66f566b32b3b">2</p> 
                            </div>
                              </div>
                          </div>
                      
                  
                      <div class="post">
                          <div class="post__top"><a href="/user/profile?id=7fdd3757-2985-4577-a4c5-f86ddd638ee2">
                                  <img class="avatar1 post__avatar" src="../uploads\e87d257082b4b467c6a0b05b7edb0855" alt="">
                                  <div class="post__topInfo">
                                      <h3>Nguyễn Tuấn Trường</h3>
                                      <p>2024-03-17 23:08</p>
                                  </div>
                              </a>
                              <div class="nameTopicBlog rounded-3">
                                  <ion-icon name="newspaper"></ion-icon>
                                  Story / Blog
                              </div>
                          </div>
                          <div class="post__bottom">
                              <div class="title">
                                  <h4>adf</h4>
                              </div>
                              <p>eds</p>
                          </div>
                          <div class="post__image">
                              <img class="rounded-2" src="../uploads\0d2399f73c2045fe46fcab78436d3408" alt="">
                          </div>
                          <div class="post__options">
                              <div class="heart">
                                <button class="heartBtn" data-post-id="88684ca2-e13d-4206-8461-ee6f2fc535c5"> <!-- Thêm thuộc tính data-post-id vào đây -->
                                <svg class="heartIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                    <path fill="currentColor" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path>
                                </svg>
                            </button>
                            <p class="numberHeart" id="likeCount_88684ca2-e13d-4206-8461-ee6f2fc535c5">0</p> 
                            </div>
                              </div>
                          </div>
                      
                  
                      <div class="post">
                          <div class="post__top"><a href="/user/profile?id=bf3deb2c-15e4-4c0f-89c6-d8409bb8bb0d">
                                  <img class="avatar1 post__avatar" src="../uploads\d6ea513e9c92d28d86ee658f5d51ed87" alt="">
                                  <div class="post__topInfo">
                                      <h3>Nguyễn Văn A</h3>
                                      <p>2024-03-17 23:11</p>
                                  </div>
                              </a>
                              <div class="nameTopicbook rounded-3">
                                  <ion-icon name="book"></ion-icon>
                                  Exchange class
                              </div>
                          </div>
                          <div class="post__bottom">
                              <div class="title">
                                  <h4>adf</h4>
                              </div>
                              <p>dsfadf</p>
                          </div>
                          <div class="post__image">
                              <img class="rounded-2" src="../uploads\7741a8e4eddedea562c694e7577d3388" alt="">
                          </div>
                          <div class="post__options">
                              <div class="heart">
                                <button class="heartBtn" data-post-id="c8e9d589-50f7-42c3-a678-2f96d72e29d8"> <!-- Thêm thuộc tính data-post-id vào đây -->
                                <svg class="heartIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                    <path fill="currentColor" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path>
                                </svg>
                            </button>
                            <p class="numberHeart" id="likeCount_c8e9d589-50f7-42c3-a678-2f96d72e29d8">1</p> 
                            </div>
                              </div>
                          </div>
                      
                  </div>
        <!-- feed ends -->
    </div>
    <!-- sidebar ends -->
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule="" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

    <div style="flex: 0.5" class="widgets">
        <div class="js-page">
            
        </div>
    </div>
    
    <!-- main body ends -->

    <div id="js-root"></div>
    <script async="" defer="" crossorigin="anonymous" src="https://connect.facebook.net/en_GB/sdk.js#xfbml=1&amp;version=v10.0" nonce="zUxEq08J"></script>
    <script>
        const nav = document.querySelector('nav');
        const sidebarRow = document.querySelector('.sidebarRow');

        sidebarRow.onclick = function () {
            nav.classList.toggle('hide');

        }
    </script>



<script>
    const heartBtns = document.querySelectorAll(".heartBtn");

    heartBtns.forEach((btn) => {
        btn.addEventListener("click", async function () {
            //this.querySelector(".heartIcon").classList.toggle("red");
            const postId = this.getAttribute("data-post-id");
            const isLiked = this.querySelector(".heartIcon").classList.contains("red");
            
            //console.log(isLiked);
            if (!postId) {
                console.error("Post ID is not set.");
                return;
            }
    
            // Vô hiệu hóa nút để ngăn like dồn dập
            this.disabled = true;
    
            try {
                // Gửi yêu cầu POST hoặc DELETE tùy thuộc vào trạng thái like
                const response = await fetch(`/like/${postId}`, {
                    method: isLiked ? "DELETE" : "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify({ postId }),
                });
    
                if (!response.ok) {
                    console.error("Error:", await response.text());
                    return;
                }
    
                // Nhận và xử lý phản hồi từ máy chủ
                const data = await response.json();
                //console.log(data);
                //console.log(data.like_count);
                if (data.success && data.like_count !== undefined) {
                    const likeCounter = document.getElementById(`likeCount_${postId}`);
                    if (likeCounter) {
                        likeCounter.textContent = data.like_count;
                    }
    
                    // Thêm/xóa lớp 'red' để thay đổi màu của biểu tượng trái tim
                    
    
                    // Kích hoạt lại nút like
                    this.disabled = false;
                }
            } catch (error) {
                console.error("Error:", error);
                // Xử lý lỗi nếu có
            }
        });
    });
    
    
</script></body></html>